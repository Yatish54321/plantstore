{"ast":null,"code":"import React,{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=process.env.REACT_APP_API_BASE_URL||'/api';function fetchJSON(url,opt){return fetch(url,opt).then(res=>{if(!res.ok)return res.json().then(j=>{throw new Error(j&&j.error?j.error:'HTTP '+res.status);});return res.json();});}export default function ModalForm(_ref){var _plant$price,_plant$inStock;let{plant=null,onClose,onSaved}=_ref;const[name,setName]=useState((plant===null||plant===void 0?void 0:plant.name)||'');const[price,setPrice]=useState((_plant$price=plant===null||plant===void 0?void 0:plant.price)!==null&&_plant$price!==void 0?_plant$price:'');const[cats,setCats]=useState(((plant===null||plant===void 0?void 0:plant.categories)||[]).join(', '));const[stock,setStock]=useState((_plant$inStock=plant===null||plant===void 0?void 0:plant.inStock)!==null&&_plant$inStock!==void 0?_plant$inStock:true);const[errors,setErrors]=useState({});function validate(){const e={};if(!name||name.trim().length<2)e.name='Name must be at least 2 characters';if(price===''||isNaN(price)||Number(price)<0)e.price='Enter a valid price';if(!cats||!cats.split(',').map(s=>s.trim()).filter(Boolean).length)e.cats='At least 1 category';setErrors(e);return Object.keys(e).length===0;}async function submit(){if(!validate())return;const payload={name:name.trim(),price:Number(price),categories:cats.split(',').map(s=>s.trim()).filter(Boolean),inStock:Boolean(stock)};try{if(plant){await fetchJSON(\"\".concat(API,\"/plants/\").concat(plant._id||plant.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});}else{await fetchJSON(\"\".concat(API,\"/plants\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});}onSaved&&onSaved();}catch(err){setErrors({submit:err.message||'Save failed'});}}return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",style:{display:'flex'},\"aria-hidden\":\"false\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",role:\"dialog\",\"aria-modal\":\"true\",\"aria-labelledby\":\"modalTitle\",children:[/*#__PURE__*/_jsx(\"h2\",{id:\"modalTitle\",children:plant?'Edit Plant':'Add a new plant'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"m_name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"m_name\",className:\"input\",placeholder:\"e.g., Money Plant\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",style:{display:errors.name?'block':'none'},children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"m_price\",children:\"Price (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"m_price\",className:\"input\",type:\"number\",min:\"0\",placeholder:\"e.g., 199\",value:price,onChange:e=>setPrice(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",style:{display:errors.price?'block':'none'},children:errors.price})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"m_cats\",children:\"Categories (comma-separated)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"m_cats\",className:\"input\",placeholder:\"Indoor, Home Decor\",value:cats,onChange:e=>setCats(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"error\",style:{display:errors.cats?'block':'none'},children:errors.cats})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-2\",style:{display:'flex',alignItems:'center',gap:10},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"m_stock\",checked:stock,onChange:e=>setStock(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"m_stock\",children:\"In stock\"})]})]}),errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",style:{display:'block',marginTop:10},children:errors.submit}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:10,justifyContent:'flex-end',marginTop:14},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-sm\",style:{background:'#fff'},onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:submit,children:plant?'Update':'Add Plant'})]})]})});}","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","API","process","env","REACT_APP_API_BASE_URL","fetchJSON","url","opt","fetch","then","res","ok","json","j","Error","error","status","ModalForm","_ref","_plant$price","_plant$inStock","plant","onClose","onSaved","name","setName","price","setPrice","cats","setCats","categories","join","stock","setStock","inStock","errors","setErrors","validate","e","trim","length","isNaN","Number","split","map","s","filter","Boolean","Object","keys","submit","payload","concat","_id","id","method","headers","body","JSON","stringify","err","message","className","style","display","children","role","htmlFor","placeholder","value","onChange","target","type","min","alignItems","gap","checked","marginTop","justifyContent","background","onClick"],"sources":["D:/Assignment/project-root/client/src/components/ModalForm.js"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst API = process.env.REACT_APP_API_BASE_URL || '/api';\r\n\r\nfunction fetchJSON(url, opt) {\r\n  return fetch(url, opt).then(res => {\r\n    if (!res.ok) return res.json().then(j => { throw new Error(j && j.error ? j.error : 'HTTP ' + res.status); });\r\n    return res.json();\r\n  });\r\n}\r\n\r\nexport default function ModalForm({ plant = null, onClose, onSaved }) {\r\n  const [name, setName] = useState(plant?.name || '');\r\n  const [price, setPrice] = useState(plant?.price ?? '');\r\n  const [cats, setCats] = useState((plant?.categories || []).join(', '));\r\n  const [stock, setStock] = useState(plant?.inStock ?? true);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  function validate() {\r\n    const e = {};\r\n    if(!name || name.trim().length < 2) e.name = 'Name must be at least 2 characters';\r\n    if(price === '' || isNaN(price) || Number(price) < 0) e.price = 'Enter a valid price';\r\n    if(!cats || !cats.split(',').map(s=>s.trim()).filter(Boolean).length) e.cats = 'At least 1 category';\r\n    setErrors(e);\r\n    return Object.keys(e).length === 0;\r\n  }\r\n\r\n  async function submit() {\r\n    if(!validate()) return;\r\n    const payload = {\r\n      name: name.trim(),\r\n      price: Number(price),\r\n      categories: cats.split(',').map(s=>s.trim()).filter(Boolean),\r\n      inStock: Boolean(stock)\r\n    };\r\n    try {\r\n      if (plant) {\r\n        await fetchJSON(`${API}/plants/${plant._id || plant.id}`, { method: 'PUT', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });\r\n      } else {\r\n        await fetchJSON(`${API}/plants`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });\r\n      }\r\n      onSaved && onSaved();\r\n    } catch (err) {\r\n      setErrors({ submit: err.message || 'Save failed' });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\" style={{display:'flex'}} aria-hidden=\"false\">\r\n      <div className=\"modal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\">\r\n        <h2 id=\"modalTitle\">{plant ? 'Edit Plant' : 'Add a new plant'}</h2>\r\n        <div className=\"grid\">\r\n          <div>\r\n            <label htmlFor=\"m_name\">Name</label>\r\n            <input id=\"m_name\" className=\"input\" placeholder=\"e.g., Money Plant\" value={name} onChange={e=>setName(e.target.value)} />\r\n            <div className=\"error\" style={{display: errors.name ? 'block' : 'none'}}>{errors.name}</div>\r\n          </div>\r\n          <div>\r\n            <label htmlFor=\"m_price\">Price (â‚¹)</label>\r\n            <input id=\"m_price\" className=\"input\" type=\"number\" min=\"0\" placeholder=\"e.g., 199\" value={price} onChange={e=>setPrice(e.target.value)} />\r\n            <div className=\"error\" style={{display: errors.price ? 'block' : 'none'}}>{errors.price}</div>\r\n          </div>\r\n          <div className=\"row-2\">\r\n            <label htmlFor=\"m_cats\">Categories (comma-separated)</label>\r\n            <input id=\"m_cats\" className=\"input\" placeholder=\"Indoor, Home Decor\" value={cats} onChange={e=>setCats(e.target.value)} />\r\n            <div className=\"error\" style={{display: errors.cats ? 'block' : 'none'}}>{errors.cats}</div>\r\n          </div>\r\n          <div className=\"row-2\" style={{display:'flex', alignItems:'center', gap:10}}>\r\n            <input type=\"checkbox\" id=\"m_stock\" checked={stock} onChange={e=>setStock(e.target.checked)} />\r\n            <label htmlFor=\"m_stock\">In stock</label>\r\n          </div>\r\n        </div>\r\n\r\n        {errors.submit && <div className=\"error\" style={{display:'block', marginTop:10}}>{errors.submit}</div>}\r\n\r\n        <div style={{display:'flex', gap:10, justifyContent:'flex-end', marginTop:14}}>\r\n          <button className=\"btn-sm\" style={{background:'#fff'}} onClick={onClose}>Cancel</button>\r\n          <button className=\"btn\" onClick={submit}>{plant ? 'Update' : 'Add Plant'}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}